<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- iOS Safari -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <!-- Chrome, Firefox OS and Opera Status Bar Color -->
  <meta name="theme-color" content="#FFFFFF">
  <meta property="og:title" content="When SSH lets us down">
    <meta property="og:type" content="blog">
  <title>When SSH lets us down</title>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
  <link rel="stylesheet" type="text/css"
    href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
  <link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
  <link rel="stylesheet" type="text/css" href="css/notablog.css">
  <link rel="stylesheet" type="text/css" href="css/theme.css">
  <style>
    :root {
      font-size: 18px;
    }

    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
    <a href="index.html">
      <div class="Navbar__Btn"><span><img class="inline-img-icon" src="https://i.imgur.com/lKXYUKS.png"></span> <span>Home</span></div>
    </a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <span class="Navbar__Delim">&centerdot;</span>
    <a href="about.html">
      <div class="Navbar__Btn"><span>👤</span> <span>About</span></div>
    </a>
                <span class="Navbar__Delim">&centerdot;</span>
    <a href="library.html">
      <div class="Navbar__Btn"><span>📓</span> <span>Library</span></div>
    </a>
          </nav>
  <header class="Header">
          <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
        <div class="Header__Icon"><span><img class="inline-img-icon" src="https://upload.wikimedia.org/wikipedia/commons/0/01/Windows_Terminal_Logo_256x256.png"></span></div>
        <h1 class="Header__Title">When SSH lets us down</h1>
            <div class="DateTagBar">
                <span class="DateTagBar__Item DateTagBar__Date">Posted on Sun, Jul 7, 2019</span>
                          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--blue">
            <a href="tag/UNIX.html">UNIX</a>
          </span>
                  </div>
          </header>
      <article id="https://www.notion.so/f50cb57e44ff4ecd814a21804fc466df" class="PageRoot"><h2 id="https://www.notion.so/023cad51296341b1b9228324d9f8d70e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/023cad51296341b1b9228324d9f8d70e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Set up SSH public-private key pair</span></span></h2><div id="https://www.notion.so/c02d45f8d9f2441e969a652d2c665fe7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">To setup the public-private key pair, we must keep the following things in mind:</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/24dfde8ff57c463fa89fd33429d18084" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Only</strong></span><span class="SemanticString"> public keys are meant to be shared
Never put your private key on the server.</span></span></li><li id="https://www.notion.so/0d643c57e08c4ee289faca49a38cd6b6" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">The public keys are </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">meant</strong></span><span class="SemanticString"> to be shared
This means that unless you pipe the public key to your remote server&#x27;s </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">~/.ssh/authorized_keys</code></span><span class="SemanticString">, a connection simply can&#x27;t be established.</span></span></li></ol><div id="https://www.notion.so/c8bc6a7be7504687ba2bd416bda7b247" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Following are the steps to set up public-private key-based authentication for your remote server:</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/d7f0506e87b04d849c4a606d6fad6212" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ssh-keygen</code></span><span class="SemanticString"> to generate the public-private key pair. Put a relevant custom name. It is recommended to provide a passkey.</span></span></li><li id="https://www.notion.so/d0382f8d9bde45659445bad7ac7d55b6" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">If you&#x27;re on DigitalOcean, you can add the </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">public key</strong></span><span class="SemanticString"> contents at their Security section. This would facilitate addition of these public keys to all the future droplets.</span></span></li><li id="https://www.notion.so/a68ce1f815524376869a190e5633dd7f" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">Otherwise, for running droplets, we&#x27;d need to manually </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">append</strong></span><span class="SemanticString"> the public key contents to the </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">~/.ssh/authorized_keys</code></span><span class="SemanticString"> file. This could be done through </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ssh-copy-id</code></span><span class="SemanticString"> (password-less) or manually (password). Please refer documentation and StackOverflow for more information.</span></span></li></ol><h2 id="https://www.notion.so/e9b7bf0c6f7a4011b34c9b2d93202171" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/e9b7bf0c6f7a4011b34c9b2d93202171"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">SSH into a remote machine</span></span></h2><pre id="https://www.notion.so/a3d94dc8e9ec4488b6e27d78391c616f" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><span><span class="token function">sudo</span> <span class="token function">ssh</span> -i keys/keypair.pem cloudbreak@1.2.3.4</span></strong></span></span></code></pre><h2 id="https://www.notion.so/cb9f303b364e4fc3b777e72dbf6bca62" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/cb9f303b364e4fc3b777e72dbf6bca62"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Secure Copy to/from a remote machine</span></span></h2><pre id="https://www.notion.so/6fef15545d124914bdc71d21079b9629" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token function">sudo</span> <span class="token function">scp</span> -i <span class="token operator">&lt;</span>.pemFile<span class="token operator">></span> <span class="token operator">&lt;</span>locaLocationPath<span class="token operator">></span> <span class="token operator">&lt;</span>username<span class="token operator">></span>@<span class="token operator">&lt;</span>remoteMachineIP<span class="token operator">></span>:<span class="token operator">&lt;</span>remoteLocationPath<span class="token operator">></span></span></span></span></code></pre><pre id="https://www.notion.so/abcc3137bf1c4bcbaf1c6c5bc7c8322b" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>scp </span></span><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Commented"><span>simpleSubmitter-assembly-0.1.jar</span></span></span><span class="SemanticString"><span> </span></span><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Commented"><span>prod-hadoop-edge</span></span></span><span class="SemanticString"><span>:</span></span><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Commented"><span>/home/cloudbreak/rounak</span></span></span></span></code></pre><h2 id="https://www.notion.so/fad9d25d67ad45db86880132157c82d7" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/fad9d25d67ad45db86880132157c82d7"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Errors setting up </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ssh &lt;host&gt;</code></span></span></h2><div id="https://www.notion.so/382785aba339408bb39c26eb5c0d6733" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">The error is mostly due to the private key (.pem) file being publicly accessible</span></span></p></div><div id="https://www.notion.so/cae5cd73dba74e4894280c87af5050be" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">⚠️</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString">WARNING: UNPROTECTED PRIVATE KEY FILE! 
It is required that your private key files are NOT accessible by others.
This private key will be ignored.</span></span></p></div><div id="https://www.notion.so/6ae87a61bc814725a7f694eeaea92462" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">To fix this, we need to change the permissions for the .pem file to be read only by the root user. To do this the command is:</span></span></p></div><pre id="https://www.notion.so/4020d95eace74a87b654447f63a22c0f" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token function">chmod</span> <span class="token number">400</span> <span class="token operator">&lt;</span>privateKey<span class="token operator">></span>.pem</span></span></span></code></pre><div id="https://www.notion.so/55a93fe2196942ffb6f8b3ea443144f9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">A sample </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">config</code></span><span class="SemanticString"> file is</span></span></p></div><pre id="https://www.notion.so/52e890a24cd341808c4159b5f809358c" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>Host dev-hadoop-edge
     HostName <span class="token number">1.2</span>.3.4
     IdentityFile ~/.ssh/keys/keypair.pem
     User cloudbreak</span></span></span></code></pre><div id="https://www.notion.so/ea876d40544143a9b4e60bc6a1e17bc2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><details id="https://www.notion.so/eb4311b535aa4f008866365fa5e11ef9" class="ColorfulBlock ColorfulBlock--ColorDefault Toggle"><summary class="Toggle__Summary"><span class="SemanticStringArray"><span class="SemanticString">My old public key </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">id_rsa.pub</code></span></span></summary><div class="Toggle__Content"><pre id="https://www.notion.so/8bd9f6706807489386a80db0e6c603ae" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDvYGgersCbbhBLlAu26677b7NaqwyXcaNJb2c4mw5ZQaFAf39qpbK260QWt+Q4f5B51ugDrqfB/ok1vhBbgdKLg9zh3dh8Csl6/Rqxl1Mu5cfkcb51orZvym/2BDAginQVtFC61M2hVMsKQyktCYLITxfGBo467qfJtQJR9MAlu4TGkpqypea4VB2gQ1DTSyGNHDXg4Qp5qOG9fXLm55rlDCG6KcCB/PI5hArtWYJasNWGV3V0u+2VniOeUoxTVZtk5PdB4O1P4wr6k1v3cJrZP/4BuhY+4ndkJ9H9ksmiJ/WVdo/ZIxVUDS1VDaonp4sBDXS9WMvi2eshxUaYLqJV rounakd@admins-MacBook-Air.local</span></span></span></code></pre></div></details><h2 id="https://www.notion.so/6aec3993b0934050ba194b51335012d5" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/6aec3993b0934050ba194b51335012d5"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">FAQs and Debugs</span></span></h2><h3 id="https://www.notion.so/66ba75501686448e897437ca392622cd" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/66ba75501686448e897437ca392622cd"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Trouble SSH over school network</span></span></h3><div id="https://www.notion.so/cb832b6fd5944925a654a6235bf7b683" class="Bookmark"><a href="https://gist.github.com/rounakdatta/419cc56071e05e864e12e34f1be3a96a"><h5 class="Bookmark__Title">Connecting through SSH on SRM Network</h5><p class="Bookmark__Desc">Ensure you&#x27;re on a non-SRM network. Access the remote machine first as: sudo ssh -i yourkey.pem ubuntu@12.345.67.890 Execute nano /etc/ssh/sshd_config and change #PORT 22 to PORT 443. This ensures the remote machine has its SSH daemon listening on port 443. Execute sudo systemctl restart ssh.service to restart the daemon.</p><p class="Bookmark__Link">https://gist.github.com/rounakdatta/419cc56071e05e864e12e34f1be3a96a</p></a></div><h2 id="https://www.notion.so/2fe61d297dd34073ba25d9ed1f089eb5" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/2fe61d297dd34073ba25d9ed1f089eb5"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Debugging Permission Denied (password, publickey)</span></span></h2><div id="https://www.notion.so/7f8f1acfd97248398ebdaf284f4af407" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">This problem arises when there&#x27;s some discrepancy with your pulic keys. To solve this, follow:</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/e0482ff540e1465cb8d0f7f991993c2c" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">Create a new public-private key pair from your machine using the command </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ssh-keygen</code></span></span></li><li id="https://www.notion.so/20345c3d21b34c53a3ac24ca219e7cd2" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">Use the command </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">cat myKeyName.pub &gt;&gt; ~/.ssh/authorized_keys</code></span><span class="SemanticString"> so that the public key is added as an authorized key on my machine</span></span></li><li id="https://www.notion.so/b5c92d1c1c624cdf8e877569cc8b5422" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">Next, use the DigitalOcean browser-provided console (or equivalent for others) to goto (basically SSH into) </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">~/.ssh/authorized_keys</code></span><span class="SemanticString"> on the remote machine and add the just generated public key to that file</span></span></li><li id="https://www.notion.so/2a662adf97e4403c8ca07c0e2371b33a" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString">Make sure you sudo systemctl restart sshd on both local as well as remote machines before going ahead and trying to ssh</span></span></li></ol><div id="https://www.notion.so/def07a8ca77c48c89c5bcc0cde56bb03" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Reminding again, the command to ssh is </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">sudo ssh -p 443 user@1.2.3.4 -i privateKey.pem</code></span><span class="SemanticString">. This is the process for SSH-based login. However you just need to type out a password in case of password-based login.</span></span></p></div><h2 id="https://www.notion.so/29d29d394e7244ada14834de653d7687" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/29d29d394e7244ada14834de653d7687"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Specifying IdentityFile, Port and Timeout in config file</span></span></h2><div id="https://www.notion.so/ff578ecda3044cc4b72c08100baa110f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">For seamless login, we must make use of the ssh config file located at </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">~/.ssh/config</code></span><span class="SemanticString">. Comparing the entire command with the config file entry:</span></span></p></div><pre id="https://www.notion.so/26d8133665c34e0894f1e8f9bd28e957" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token comment"># doing it the lengthy way</span>
<span class="token function">sudo</span> <span class="token function">ssh</span> -p <span class="token number">443</span> user@1.2.3.4 -i privateKey.pem</span></span></span></code></pre><pre id="https://www.notion.so/192cdf5317d045f289cb33c6228072c1" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token comment"># doing it the smart way</span>
Host personal
    Hostname <span class="token number">1.2</span>.3.4
    User root
    Port <span class="token number">443</span>
    IdentityFile ~/privateKey.pem
    ServerAliveInterval <span class="token number">240</span></span></span></span></code></pre><div id="https://www.notion.so/6cf4d778e67d40a58ab2eeedf163b616" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">And then you just do </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ssh personal</code></span><span class="SemanticString"> to kick the SSH login.</span></span></p></div><h2 id="https://www.notion.so/9e69cfb2d5c74b618c3fb40054c6f9e0" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/9e69cfb2d5c74b618c3fb40054c6f9e0"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">SSH session freezes too soon</span></span></h2><div id="https://www.notion.so/f9581e51a4d748188313bf425877ab4f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">This characteristic is governed by a property called </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ServerAliveInterval</code></span><span class="SemanticString"> on the server side. Specifying it as 240 tells the server SSH daemon to keep pinging the clients every 240s. Therefore in </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">/etc/ssh/sshd_config</code></span><span class="SemanticString"> this property must be set to prevent your client&#x27;s SSH to be freezing too soon.</span></span></p></div><h2 id="https://www.notion.so/5bde907b231f4940aab4a0f0894163d9" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/5bde907b231f4940aab4a0f0894163d9"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Gracefully close a frozen SSH session without closing the terminal</span></span></h2><div id="https://www.notion.so/37fb3281b7b5477c987910c7d9393d03" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">This is a typical case of the SSH session frozen, and neither can you exit from it (probably after the system was off for a longer period of time). People tend to close the terminal window and start working on a new. The smarter way is the key combination </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Enter</code></span><span class="SemanticString"> → </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">~</code></span><span class="SemanticString"> → </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">.</code></span><span class="SemanticString">. These are the escape sequences supported:</span></span></p></div><div id="https://www.notion.so/28a4458c34bf4998b5dbf994635c10c1" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Feef96fcd-40ee-4f7e-9d14-25fda14a0058%2FUntitled.png?width=597"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Feef96fcd-40ee-4f7e-9d14-25fda14a0058%2FUntitled.png?width=597" style="width:597px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h2 id="https://www.notion.so/2fc9ae97ae1c4fddb64a933ba51fdce9" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/2fc9ae97ae1c4fddb64a933ba51fdce9"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!</code></span><span class="SemanticString"> Why this problem occurs and what&#x27;s the solve</span></span></h2><div id="https://www.notion.so/7c0d2f8ac27c4214b2b9544cd0d9c5f3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">This problem happens mostly because the ECDSA key fingerprint might have been changed. This has a simple solve (restarting the computer works 😄)
We need to vim into </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">~/.ssh/known_hosts</code></span><span class="SemanticString"> and remove the entry for the failing SSH host. Re-add the key while retrying to ssh.</span></span></p></div></article>  <footer class="Footer">
        <div>&copy; Rounak's μBlog 2019</div>
        <div>&centerdot;</div>
        <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
            rel="noopener noreferrer">Notablog</a>.
        </div>
    </footer>
</body>

</html>