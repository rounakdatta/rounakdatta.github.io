<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- iOS Safari -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <!-- Chrome, Firefox OS and Opera Status Bar Color -->
  <meta name="theme-color" content="#FFFFFF">
  <meta property="og:title" content="My musings with STM32">
    <meta name="description" content="STM32 is a ultra-low power & dirt-cheap microcontroller">
  <meta property="og:description" content="STM32 is a ultra-low power & dirt-cheap microcontroller">
    <meta property="og:type" content="blog">
  <title>My musings with STM32</title>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
  <link rel="stylesheet" type="text/css"
    href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
  <link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
  <link rel="stylesheet" type="text/css" href="css/notablog.css">
  <link rel="stylesheet" type="text/css" href="css/theme.css">
  <style>
    :root {
      font-size: 18px;
    }

    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
    <a href="index.html">
      <div class="Navbar__Btn"><span><img class="inline-img-icon" src="https://i.imgur.com/lKXYUKS.png"></span> <span>Home</span></div>
    </a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span class="Navbar__Delim">&centerdot;</span>
    <a href="library.html">
      <div class="Navbar__Btn"><span>üìì</span> <span>Library</span></div>
    </a>
                <span class="Navbar__Delim">&centerdot;</span>
    <a href="about.html">
      <div class="Navbar__Btn"><span>üë§</span> <span>About</span></div>
    </a>
          </nav>
  <header class="Header">
          <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
        <div class="Header__Icon"><span><img class="inline-img-icon" src="https://i.imgur.com/MsLpCft.jpg"></span></div>
        <h1 class="Header__Title">My musings with STM32</h1>
            <div class="DateTagBar">
                <span class="DateTagBar__Item DateTagBar__Date">Posted on Wed, Aug 28, 2019</span>
                          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--yellow">
            <a href="tag/IoT.html">IoT</a>
          </span>
                  </div>
          </header>
      <article id="https://www.notion.so/639d99e8671c482aa3a4d552ecf99056" class="PageRoot"><div id="https://www.notion.so/5e0d424db6454f07b041c89df1d26749" class="CollectionInline"><h3><a class="Anchor" href="#https://www.notion.so/5e0d424db6454f07b041c89df1d26749"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Technical Specifications</span></span></h3><div class="Table"><table><thead><tr><th style="width:314px">Specification</th><th style="width:311px">Value</th></tr></thead><tbody><tr><td class="Table__CellTitle"><a href="https://www.notion.so/d1a2ab7c284a4893809dc29e6f62c62a"><span class="SemanticStringArray"><span class="SemanticString">Architecture</span></span></a></td><td class="Table__CellText"><span class="SemanticStringArray"><span class="SemanticString">32-bit ARM Cortex M3</span></span></td></tr><tr><td class="Table__CellTitle"><a href="https://www.notion.so/30839ede6b3f4a17b9083adc5d63a182"><span class="SemanticStringArray"><span class="SemanticString">Operating Voltage</span></span></a></td><td class="Table__CellText"><span class="SemanticStringArray"><span class="SemanticString">2.7V to 3.6V</span></span></td></tr><tr><td class="Table__CellTitle"><a href="https://www.notion.so/9bdfc5f6859e4997becea767ca635d80"><span class="SemanticStringArray"><span class="SemanticString">CPU Frequency</span></span></a></td><td class="Table__CellText"><span class="SemanticStringArray"><span class="SemanticString">72 MHz</span></span></td></tr><tr><td class="Table__CellTitle"><a href="https://www.notion.so/4018835848804e849e44cbca4c668d41"><span class="SemanticStringArray"><span class="SemanticString">Number of GPIO pins</span></span></a></td><td class="Table__CellText"><span class="SemanticStringArray"><span class="SemanticString">37</span></span></td></tr><tr><td class="Table__CellTitle"><a href="https://www.notion.so/d6813f363c01432380c11a33f3a192c7"><span class="SemanticStringArray"><span class="SemanticString">Number of PWM pins</span></span></a></td><td class="Table__CellText"><span class="SemanticStringArray"><span class="SemanticString">12</span></span></td></tr><tr><td class="Table__CellTitle"><a href="https://www.notion.so/c6a107bc79bc44cd88f804cd796ff4a8"><span class="SemanticStringArray"><span class="SemanticString">Analog input Pins</span></span></a></td><td class="Table__CellText"><span class="SemanticStringArray"><span class="SemanticString">10 (12-bit)</span></span></td></tr><tr><td class="Table__CellTitle"><a href="https://www.notion.so/ef94e2cf62fc449eb263a9022249b1e2"><span class="SemanticStringArray"><span class="SemanticString">USART Peripherals</span></span></a></td><td class="Table__CellText"><span class="SemanticStringArray"><span class="SemanticString">3</span></span></td></tr><tr><td class="Table__CellTitle"><a href="https://www.notion.so/d5ff3e8dcd9b40a3a018c50a9848f0ae"><span class="SemanticStringArray"><span class="SemanticString">I2C Peripherals</span></span></a></td><td class="Table__CellText"><span class="SemanticStringArray"><span class="SemanticString">2</span></span></td></tr><tr><td class="Table__CellTitle"><a href="https://www.notion.so/eed30be66c73417d842c95dd1aef155e"><span class="SemanticStringArray"><span class="SemanticString">SPI Peripherals</span></span></a></td><td class="Table__CellText"><span class="SemanticStringArray"><span class="SemanticString">2</span></span></td></tr><tr><td class="Table__CellTitle"><a href="https://www.notion.so/7085e0c12b9a4956be18138fe7fcf734"><span class="SemanticStringArray"><span class="SemanticString">Can 2.0 Peripheral</span></span></a></td><td class="Table__CellText"><span class="SemanticStringArray"><span class="SemanticString">1</span></span></td></tr><tr><td class="Table__CellTitle"><a href="https://www.notion.so/6c256ec223004b3188ee21b4f1b1797f"><span class="SemanticStringArray"><span class="SemanticString">Timers</span></span></a></td><td class="Table__CellText"><span class="SemanticStringArray"><span class="SemanticString">3(16-bit), 1 (PWM)</span></span></td></tr><tr><td class="Table__CellTitle"><a href="https://www.notion.so/0ee19f7fd3af494fbab06ea0f3c871ee"><span class="SemanticStringArray"><span class="SemanticString">Flash Memory</span></span></a></td><td class="Table__CellText"><span class="SemanticStringArray"><span class="SemanticString">64KB</span></span></td></tr><tr><td class="Table__CellTitle"><a href="https://www.notion.so/a7ff686a8e1e42e79cc80cd19733eab8"><span class="SemanticStringArray"><span class="SemanticString">RAM</span></span></a></td><td class="Table__CellText"><span class="SemanticStringArray"><span class="SemanticString">20KB</span></span></td></tr></tbody></table></div></div><h2 id="https://www.notion.so/61833380ed284dcf8c23d7342fb9e6e5" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/61833380ed284dcf8c23d7342fb9e6e5"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Get Started</span></span></h2><div id="https://www.notion.so/2b4dfc2e40324e35b8d4279d82795f2f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><del class="SemanticString__Fragment SemanticString__Fragment--Strike">Linux driver installation: </del></span><span class="SemanticString"><del class="SemanticString__Fragment SemanticString__Fragment--Strike"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="http://padcom13.blogspot.com/2015/12/getting-started-with-stm32-on-ubuntu.html">http://padcom13.blogspot.com/2015/12/getting-started-with-stm32-on-ubuntu.html</a></del></span></span></p></div><details id="https://www.notion.so/11a13dcaf1294d7a8cf940c771f7161e" class="ColorfulBlock ColorfulBlock--ColorDefault Toggle"><summary class="Toggle__Summary"><span class="SemanticStringArray"><span class="SemanticString">Windows</span></span></summary><div class="Toggle__Content"><ol class="NumberedListWrapper"><li id="https://www.notion.so/c855c24e593443dba182f378ed8c6ab3" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">Set up </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">STM32CubeMX</strong></span><span class="SemanticString">: </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.st.com/en/microcontrollers-microprocessors/stm32f103c8.html">https://www.st.com/en/microcontrollers-microprocessors/stm32f103c8.html</a></span></span></li><li id="https://www.notion.so/e9b1baf22df54666aa94e76215fb329d" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">Set up </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">TrueSTUDIO</strong></span><span class="SemanticString">: </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://atollic.com/truestudio/">https://atollic.com/truestudio/</a></span></span></li><li id="https://www.notion.so/15d997f8ff0b4641a8ef7e50f5eeee19" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">Download and install other drivers through intermediate prompts</span></span></li><li id="https://www.notion.so/1790d707ed4f4ba091ce166c845a89f4" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString">End to end video tutorial to set up the development environment and getting started with a </span><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">Blinky </em></span><span class="SemanticString">project:</span></span><div id="https://www.notion.so/3f364f18ac114591bf74b3e7e78854bc" class="Embed"><div class="Embed__Content"><div class="Embed__ResponsiveContainer" style="width:854px;padding-bottom:56.20608899297424%"><iframe src="https://www.youtube.com/embed/pt6tWAieBeU?feature=oembed" sandbox="allow-scripts allow-popups allow-forms allow-same-origin" allowfullscreen=""></iframe></div></div><p class="Embed__Caption"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/cccd102c41c94c0094616883436c5417" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div></li><li id="https://www.notion.so/1e86c5ff492c44e1b8f7bdcf995f1217" class="NumberedList" value="5"><span class="SemanticStringArray"><span class="SemanticString">Tutorial video to help connect the ST-Link programming unit to the STM32 MCU:</span></span><div id="https://www.notion.so/5bb89ac0667046d1bc08859265dd4a84" class="Embed"><div class="Embed__Content"><div class="Embed__ResponsiveContainer" style="width:854px;padding-bottom:56.20608899297424%"><iframe src="https://www.youtube.com/embed/KgR3uM21y7o?start=125&amp;feature=oembed&amp;start=125" sandbox="allow-scripts allow-popups allow-forms allow-same-origin" allowfullscreen=""></iframe></div></div><p class="Embed__Caption"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/3e9d5c2d14c44a9b94f0884ee9ec24cf" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/a69cc8c64c7e424b8cac91cbb2e76544" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F14b73e8c-3ebe-4551-be2a-f9044f03a209%2FUntitled.png?width=600"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F14b73e8c-3ebe-4551-be2a-f9044f03a209%2FUntitled.png?width=600" style="width:600px"/></a><figcaption><span class="SemanticStringArray"><span class="SemanticString">Pinout diagram of the ST-LINK programming unit</span></span></figcaption></figure></div></li><li id="https://www.notion.so/b29a0c2d3f194f5ab5dadea083800226" class="NumberedList" value="6"><span class="SemanticStringArray"><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Debug</strong></em></span><span class="SemanticString"> to upload the code (.hex file) to STM32 and </span><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Resume </strong></em></span><span class="SemanticString">to actually execute the code on the MCU.</span></span></li></ol></div></details><div id="https://www.notion.so/f4f7d3f596f2418a9ce63ebb6b0185c4" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">üí°</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString">Note that in the programming unit, we connect to the pins </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">2, 4, 6, 8</strong></span><span class="SemanticString">. The pins are respectively </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">SWCLK, SWDIO, GND, 3.3V</strong></span><span class="SemanticString">. Corresponding are connected in the STM32.</span></span></p></div><h2 id="https://www.notion.so/f792507adf1940c9818f29d93a59dc5e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/f792507adf1940c9818f29d93a59dc5e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Debugging</span></span></h2><h3 id="https://www.notion.so/c62740fe8e6845d286df67e44d67594e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/c62740fe8e6845d286df67e44d67594e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Connecting STM32 to PC using Serial Adapter (or Arduino)</span></span></h3><div id="https://www.notion.so/457d2dddefc0457cae4e033020e7bcdc" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Use an Arduino and connect the </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">RESET</strong></span><span class="SemanticString"> and </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">GND</strong></span><span class="SemanticString"> pins together</span></span></p></div><div id="https://www.notion.so/d46a163ea720453c84f492ae371e093b" class="Image Image--PageWidth"><figure><a href="https://alselectro.files.wordpress.com/2018/11/stm32_ok2_thumb.jpg?w=607&amp;h=491"><img src="https://alselectro.files.wordpress.com/2018/11/stm32_ok2_thumb.jpg?w=607&amp;h=491" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h2 id="https://www.notion.so/1f7bc50710c04bfd893b2f8adb928f38" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/1f7bc50710c04bfd893b2f8adb928f38"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Custom Bootloader (Windows App)</span></span></h2><div id="https://www.notion.so/14777cbcda2e44cc8ebfd212b2817640" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://whuangpro.wordpress.com/2017/10/29/custom-bootloader/">https://whuangpro.wordpress.com/2017/10/29/custom-bootloader/</a></span></span></p></div><h2 id="https://www.notion.so/d941138f9238426eaea0bb7d7c7556c9" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/d941138f9238426eaea0bb7d7c7556c9"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Setup [using </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Arduino</code></span><span class="SemanticString">] (DID NOT WORK OUT!!)</span></span></h2><div id="https://www.notion.so/0e5168010702479fb3db95823f19be65" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F1fed9eb8-7aa6-4ead-a364-36a8870180c1%2Fstm32-arduino.jpeg?width=1280"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F1fed9eb8-7aa6-4ead-a364-36a8870180c1%2Fstm32-arduino.jpeg?width=1280" style="width:100%"/></a><figcaption><span class="SemanticStringArray"><span class="SemanticString">Connecting pin2pin</span></span></figcaption></figure></div><div id="https://www.notion.so/a37bf35df213467ca0d392f0e843d2f9" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fb80acd8a-7ea2-4d23-bceb-d67ad974107a%2Fstm32-arduino-breadboard.jpeg?width=1280"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fb80acd8a-7ea2-4d23-bceb-d67ad974107a%2Fstm32-arduino-breadboard.jpeg?width=1280" style="width:100%"/></a><figcaption><span class="SemanticStringArray"><span class="SemanticString">Connecting through breadboard (some incorrect GND connections here)</span></span></figcaption></figure></div><h3 id="https://www.notion.so/022e4fda9d92469b914fbc949f03fc4e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/022e4fda9d92469b914fbc949f03fc4e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Points to note while connecting</span></span></h3><ul class="BulletedListWrapper"><li id="https://www.notion.so/b1bede0b15214e3195ea979b13258aa4" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Connect the </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">RESET</code></span><span class="SemanticString"> and </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">GND</code></span><span class="SemanticString"> both on Arduino to make it act like a </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.amazon.in/REES52-FT232RL-Download-Adapter-Arduino/dp/B00M1K412U/ref=sr_1_4?crid=19AUC58D1TETD&amp;keywords=usb+serial+adapter&amp;qid=1567110629&amp;s=gateway&amp;sprefix=usb+serial+%2Caps%2C501&amp;sr=8-4"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">serial adapter</strong></a></span><span class="SemanticString">.</span></span></li><li id="https://www.notion.so/59a80e4f7ea9416a8e37db69934b9054" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Connect the </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">GND</code></span><span class="SemanticString"> of STM32 and </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">GND</code></span><span class="SemanticString"> of Arduino.</span></span></li><li id="https://www.notion.so/4ae1404689cc42a8819a84c4f6c1384b" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Connect the </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">3.3V pin</code></span><span class="SemanticString"> of STM32 to </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">3.3V pin</code></span><span class="SemanticString"> of Arduino.</span></span></li><li id="https://www.notion.so/e817937222c54619ad5312f885030eb8" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Connect the </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">PA9 (Tx)</code></span><span class="SemanticString"> of STM32 to the </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Rx</code></span><span class="SemanticString"> of Arduino.</span></span></li><li id="https://www.notion.so/64e1d6e5d9264d3caaa8fe7dc2e7aec2" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Connect the </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">PA10 (Rx)</code></span><span class="SemanticString"> of STM32 to the </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Tx</code></span><span class="SemanticString"> of Arduino.</span></span></li></ul><div id="https://www.notion.so/72f191cd4a954dabbc83ca66ac44ae48" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">‚ùå</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString">This method did NOT work out!! Neither did removing the </span><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">Atmel IC</em></span><span class="SemanticString"> of the Arduino help.</span></span></p></div><h2 id="https://www.notion.so/7e3c2230a82b443ab7c5a351f3cd9c6d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/7e3c2230a82b443ab7c5a351f3cd9c6d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Setup [using </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.amazon.in/REES52-FT232RL-Download-Adapter-Arduino/dp/B00M1K412U/ref=sr_1_4?crid=19AUC58D1TETD&amp;keywords=usb+serial+adapter&amp;qid=1567110629&amp;s=gateway&amp;sprefix=usb+serial+%2Caps%2C501&amp;sr=8-4"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Serial Adapter / USB2TTL</code></a></span><span class="SemanticString">]</span></span></h2><div id="https://www.notion.so/ee31a014d6b443538645b8ef2edd2f89" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F6c8bcb0b-4b3f-4961-b0df-a64535bef059%2FIMG-20190903-WA0050.jpeg?width=624"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F6c8bcb0b-4b3f-4961-b0df-a64535bef059%2FIMG-20190903-WA0050.jpeg?width=624" style="width:624px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h2 id="https://www.notion.so/05894a12798147ec9384323972d8d22b" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/05894a12798147ec9384323972d8d22b"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Setup [using </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">ST-LINK Programming Unit</code></span><span class="SemanticString">]</span></span></h2><div id="https://www.notion.so/aff7b91a364f4488add3aed0661b4fd4" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F475f6078-1fb7-4152-8304-df02fede317e%2FIMG_20190903_233507.jpg?width=624"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F475f6078-1fb7-4152-8304-df02fede317e%2FIMG_20190903_233507.jpg?width=624" style="width:624px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h2 id="https://www.notion.so/312f044241c348c3a645c1894122499f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/312f044241c348c3a645c1894122499f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Things to Remember</span></span></h2><div id="https://www.notion.so/9f5bbcab33b54fafa69e962f9c9d50cb" class="ColumnList"><div id="https://www.notion.so/ca532e772f474c45aa39a689cbadde50" class="Column" style="width:calc((100% - var(--column-spacing) * 1) * 0.5)"><ul class="BulletedListWrapper"><li id="https://www.notion.so/a2a7b6660b55477cab1ee6c87827af95" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">While programming and testing the STM32 using the serial adapter, it is important to set the boot pins correctly, otherwise results are not correct. Pinout diagram </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="#https://www.notion.so/d46a163ea720453c84f492ae371e093b">here</a></span><span class="SemanticString">.</span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/bc8fa60b17a94fc294b1c168071b0e28" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Programming mode</strong></span><span class="SemanticString">: Boot Pin 0 set to HIGH, Boot Pin 1 set to LOW</span></span></li><li id="https://www.notion.so/54b1d3f6d3fd4b9f87e925e87034fe0e" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Operation mode</strong></span><span class="SemanticString">: Boot Pin 0 set to LOW, Boot Pin 1 set to LOW</span></span></li></ul></li></ul></div><div id="https://www.notion.so/3ae2012b0b794f8da00513cdd84686db" class="Column" style="width:calc((100% - var(--column-spacing) * 1) * 0.5);margin-left:var(--column-spacing)"><div id="https://www.notion.so/768a7d98c5ae4b2a9eb842b76efb7fd2" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F09d941f9-61f9-4964-8793-c88c11adeb7d%2FIMG_20190904_184135.jpg?width=336"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F09d941f9-61f9-4964-8793-c88c11adeb7d%2FIMG_20190904_184135.jpg?width=336" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div></div></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/f7298b37b69f46edb5f5b68699428581" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">We use </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.st.com/en/development-tools/flasher-stm32.html"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">FLASHER-STM32</strong></a></span><span class="SemanticString"> for flashing </span><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">.bin</em></span><span class="SemanticString"> files to the STM32. Available for Windows.</span></span></li><li id="https://www.notion.so/1989424c7c9e468ea69637eb08462227" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">We use </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://sourceforge.net/projects/stm32flash/">stm32flash</a></strong></span><span class="SemanticString"> for flashing .bin files to the STM32. Cross-platform &amp; well-tested on Arch Linux.</span></span></li><li id="https://www.notion.so/07add23ea275410698de40f4237444be" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">While flashing a </span><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">.bin</em></span><span class="SemanticString"> file using this software, we </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Download the File</strong></code></span><span class="SemanticString"> to to the device. This is important.</span></span></li></ul><h2 id="https://www.notion.so/487867b3be0b4785adb9801036474dc4" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/487867b3be0b4785adb9801036474dc4"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Talking to STM32 through commands</span></span></h2><div id="https://www.notion.so/9b7e2e993c224932a02242e2004064d1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">We can directly send commands through a </span><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">Serial Terminal</em></span><span class="SemanticString"> (Arduino default, CuteCom etc) and upon sending the correct commands, the STM32 will respond correctly.</span></span></p></div><div id="https://www.notion.so/4f1c06475d384656a3f09ec166547822" class="CollectionInline"><h3><a class="Anchor" href="#https://www.notion.so/4f1c06475d384656a3f09ec166547822"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Commands</span></span></h3><div class="Table"><table><thead><tr><th style="width:140px">Purpose</th><th style="width:157px">Command sent</th><th style="width:135px">ACK received</th><th style="width:200px">Explanation</th></tr></thead><tbody><tr><td class="Table__CellTitle"><a href="https://www.notion.so/5f1ca8340e4947b7afc8bc3531744043"><span class="SemanticStringArray"><span class="SemanticString">Init (must send this first)</span></span></a></td><td class="Table__CellText"><span class="SemanticStringArray"><span class="SemanticString">0x7F</span></span></td><td class="Table__CellText"><span class="SemanticStringArray"><span class="SemanticString">0x79 (</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">y</code></span><span class="SemanticString">)</span></span></td><td class="Table__CellText"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">y</code></span><span class="SemanticString"> means success of the operation</span></span></td></tr><tr><td class="Table__CellTitle"><a href="https://www.notion.so/c595f88da1854742bb37749ad82331ff"><span class="SemanticStringArray"><span class="SemanticString">Bootloader version</span></span></a></td><td class="Table__CellText"><span class="SemanticStringArray"><span class="SemanticString">0x01
0xFE</span></span></td><td class="Table__CellText"><span class="SemanticStringArray"><span class="SemanticString">0x79 (</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">y</code></span><span class="SemanticString">)
0x22 (</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">&quot;</code></span><span class="SemanticString">)</span></span></td><td class="Table__CellText"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">&quot;</code></span><span class="SemanticString"> means 0x22 however this might change according to the bootloader version</span></span></td></tr><tr><td class="Table__CellTitle"><a href="https://www.notion.so/8141cd1aa10249ac8df47bf1514cf093"><span class="SemanticStringArray"></span></a></td><td class="Table__CellText"><span class="SemanticStringArray"></span></td><td class="Table__CellText"><span class="SemanticStringArray"></span></td><td class="Table__CellText"><span class="SemanticStringArray"></span></td></tr></tbody></table></div></div></article>  <footer class="Footer">
        <div>&copy; Rounak's ŒºBlog 2019</div>
        <div>&centerdot;</div>
        <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
            rel="noopener noreferrer">Notablog</a>.
        </div>
    </footer>
</body>

</html>